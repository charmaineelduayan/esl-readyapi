<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="1548d88a-4b6d-4d09-a898-35d02360bd1f" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="retrieveTerminalId" searchProperties="true" timeout="0" maxResults="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="29248324-5af0-4dc9-9034-6ba0408b5812fileName">retrieveTerminalId</con:setting>
    <con:setting id="1548d88a-4b6d-4d09-a898-35d02360bd1ffileName">retrieveTerminalId</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="datasource" name="DataSource" id="a0500a42-c78c-4656-b110-82562e53976c">
    <con:settings/>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="Excel">
        <con:configuration><file>Booking_REST_Input.xls</file><worksheet>RetrieveTerminalId</worksheet><cell>A1</cell><ignoreEmpty>false</ignoreEmpty><evaluateFormulas>false</evaluateFormulas></con:configuration>
      </con:dataSource>
      <con:shared>false</con:shared>
      <con:restartShared>false</con:restartShared>
      <con:property>S.No</con:property>
      <con:property>ServiceName</con:property>
      <con:property>Operation Name</con:property>
      <con:property>ExecutionFlag</con:property>
      <con:property>TestCaseName</con:property>
      <con:property>TestCaseDescription</con:property>
      <con:property>application</con:property>
      <con:property>brand</con:property>
      <con:property>domainId</con:property>
      <con:property>language</con:property>
      <con:property>uuid</con:property>
      <con:property>countryCode</con:property>
      <con:property>agencyId</con:property>
      <con:property>bookingId</con:property>
      <con:property>bookingAccessToken</con:property>
      <con:property>shipCode</con:property>
      <con:property>sailDate</con:property>
      <con:property>Orchestration_application</con:property>
      <con:property>Orchestration_brand</con:property>
      <con:property>Orchestration_office</con:property>
      <con:property>Orchestration_channel</con:property>
      <con:property>Orchestration_countryCode</con:property>
      <con:property>Orchestration_bookingType</con:property>
      <con:property>Orchestration_cruiseType</con:property>
      <con:property>Orchestration_accessibleCabins</con:property>
      <con:property>Orchestration_Facets</con:property>
      <con:property>Orchestration_results</con:property>
      <con:property>Orchestration_pagination</con:property>
      <con:property>Orchestration_Prices</con:property>
      <con:property>Orchestration_guestAge</con:property>
      <con:property>Orchestration_includeDeckInfo</con:property>
      <con:property>Orchestration_seniorReqd</con:property>
      <con:property>Orchestration_militaryReqd</con:property>
      <con:property>Orchestration_policeReqd</con:property>
      <con:property>Orchestration_fireFighterReqd</con:property>
      <con:property>Orchestration_includeAllStaterooms</con:property>
      <con:property>Orchestration_includeUpsell</con:property>
      <con:property>Orchestration_includePromoContent</con:property>
      <con:property>Orchestration_includeCategory</con:property>
      <con:property>Orchestration_accessibleReqd</con:property>
      <con:property>Orchestration_guestCount</con:property>
      <con:property>Orchestration_currencyCode</con:property>
      <con:property>Orchestration_sitting</con:property>
      <con:property>Orchestration_sittingType</con:property>
      <con:property>Orchestration_sittingInstance</con:property>
      <con:property>Orchestration_dine waitListed</con:property>
      <con:property>Orchestration_gratuitiesPrepaid</con:property>
      <con:property>Orchestration_firstName</con:property>
      <con:property>Orchestration_lastName</con:property>
      <con:property>Orchestration_age</con:property>
      <con:property>Orchestration_birthDate</con:property>
      <con:property>Orchestration_gender</con:property>
      <con:property>Orchestration_telephoneNumber</con:property>
      <con:property>Orchestration_telephoneCountryCode</con:property>
      <con:property>Orchestration_telephoneType</con:property>
      <con:property>Orchestration_address1</con:property>
      <con:property>Orchestration_city</con:property>
      <con:property>Orchestration_stateCode</con:property>
      <con:property>Orchestration_postalCode</con:property>
      <con:property>Orchestration_email</con:property>
      <con:property>Orchestration_deliveryMethod</con:property>
      <con:property>Orchestration_cardType</con:property>
      <con:property>Orchestration_cardToken</con:property>
      <con:property>Orchestration_expireDate</con:property>
      <con:property>Orchestration_amount</con:property>
      <con:property>Orchestration_extendPayments</con:property>
      <con:property>Orchestration_courtesyHold</con:property>
      <con:property>Orchestration_domainId</con:property>
      <con:property>Orchestration_lockBooking</con:property>
      <con:property>Orchestration_summaryRequested</con:property>
      <con:property>Orchestration_folderTypeCode</con:property>
      <con:property>Orchestration_bookingTypeCode</con:property>
      <con:property>Orchestration_retrieveAllBookings</con:property>
      <con:property>Orchestration_disassociate</con:property>
      <con:startRow>1</con:startRow>
      <con:endRow>1</con:endRow>
      <con:recordsPerIteration>1</con:recordsPerIteration>
      <con:completeLastOperation>true</con:completeLastOperation>
      <con:trimValues>false</con:trimValues>
      <con:entitizeValues>false</con:entitizeValues>
      <con:restartOnRun>true</con:restartOnRun>
      <con:expandProperties>false</con:expandProperties>
      <con:stopDatasourceExhausted>false</con:stopDatasourceExhausted>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="CruiseSearch" id="6b4f6a6b-5e11-4471-bbfa-cc253fa5e5f7">
    <con:settings/>
    <con:config service="CruiseSearch" resourcePath="/cruiseSearch?" methodName="CruiseSearch" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="CruiseSearch" id="311d37c2-2066-49ea-aeb4-3adc006be12d" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>http://eslbservicestst01.rccl.com:13000</con:endpoint>
        <con:request/>
        <con:originalUri>http://eslbservicestst01.rccl.com/esl/search/rest/cruiseSearch</con:originalUri>
        <con:assertion type="XPath Match" id="c43b1d25-7846-427b-9895-b1be816f31b5" name="Match content of [status]">
          <con:configuration>
            <path>declare namespace ns2='http://www.rccl.com/esl/services/search/v2';
//ns2:CruiseSearchResponse[1]/header[1]/status[1]/text()</path>
            <content>Success</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="XPath Match" id="d222f7f6-a434-4bd5-8fd6-b36bcc9f2e07" name="Match content of [status]">
          <con:configuration>
            <path>declare namespace ns2='http://www.rccl.com/esl/services/search/v2';
//ns2:CruiseSearchResponse[1]/header[1]/status[1]/text()</path>
            <content>Success</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="XPath Match" id="f101f062-feec-4da4-8828-363fedb92ff2" name="Match content of [status]">
          <con:configuration>
            <path>declare namespace ns2='http://www.rccl.com/esl/services/search/v2';
//ns2:CruiseSearchResponse[1]/header[1]/status[1]/text()</path>
            <content>Success</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:parameters>
          <con:entry key="criteria.brand.value" value="${DataSource#Orchestration_brand}"/>
          <con:entry key="header.application" value="${DataSource#Orchestration_application}"/>
          <con:entry key="criteria.channel" value="${DataSource#Orchestration_channel}"/>
          <con:entry key="resultsPreference.includeResults" value="${DataSource#Orchestration_results}"/>
          <con:entry key="criteria.accessibleCabins" value="${DataSource#Orchestration_accessibleCabins}"/>
          <con:entry key="criteria.office" value="${DataSource#Orchestration_office}"/>
          <con:entry key="criteria.currency" value="${DataSource#Orchestration_currencyCode}"/>
          <con:entry key="header.brand" value="${DataSource#Orchestration_brand}"/>
          <con:entry key="criteria.sailingDate.dateRange.from" value="2023-05-01"/>
          <con:entry key="resultsPreference.includePrices" value="${DataSource#Orchestration_Prices}"/>
          <con:entry key="criteria.bookingType" value="${DataSource#Orchestration_bookingType}"/>
          <con:entry key="resultsPreference.pagination.count" value="${DataSource#Orchestration_pagination}"/>
          <con:entry key="resultsPreference.includeFacets" value="${DataSource#Orchestration_Facets}"/>
          <con:entry key="criteria.country" value="${DataSource#Orchestration_countryCode}"/>
          <con:entry key="criteria.cruiseType.value" value="${DataSource#Orchestration_cruiseType}"/>
          <con:entry key="criteria.sailingDate.dateRange.to" value="2024-05-31"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>header.application</con:entry>
          <con:entry>header.language</con:entry>
          <con:entry>header.domainId</con:entry>
          <con:entry>header.brand</con:entry>
          <con:entry>header.uuid</con:entry>
          <con:entry>criteria.office</con:entry>
          <con:entry>criteria.country</con:entry>
          <con:entry>criteria.currency</con:entry>
          <con:entry>criteria.channel</con:entry>
          <con:entry>criteria.bookingType</con:entry>
          <con:entry>criteria.cruiseType.value</con:entry>
          <con:entry>criteria.brand.value</con:entry>
          <con:entry>criteria.ship.value</con:entry>
          <con:entry>criteria.port.value</con:entry>
          <con:entry>criteria.portOfCall.value</con:entry>
          <con:entry>criteria.tourCity.value</con:entry>
          <con:entry>criteria.region.value</con:entry>
          <con:entry>criteria.duration.value</con:entry>
          <con:entry>criteria.packageId.value</con:entry>
          <con:entry>criteria.marketingPromotionType.value</con:entry>
          <con:entry>criteria.marketingPromotionId.value</con:entry>
          <con:entry>criteria.onboardActivity.value</con:entry>
          <con:entry>criteria.sailingDate.dateRange.from</con:entry>
          <con:entry>criteria.sailingDate.dateRange.to</con:entry>
          <con:entry>criteria.startDate.dateRange.from</con:entry>
          <con:entry>criteria.startDate.dateRange.to</con:entry>
          <con:entry>criteria.occupancy.adult</con:entry>
          <con:entry>criteria.occupancy.child</con:entry>
          <con:entry>criteria.occupancy.infant</con:entry>
          <con:entry>criteria.priceRange.min</con:entry>
          <con:entry>criteria.priceRange.max</con:entry>
          <con:entry>criteria.priceRange.cabinClass</con:entry>
          <con:entry>criteria.accessibleCabins</con:entry>
          <con:entry>qualifiers.priceId.value</con:entry>
          <con:entry>qualifiers.promotionId.value</con:entry>
          <con:entry>qualifiers.promotionType.value</con:entry>
          <con:entry>qualifiers.residentType.promotionType</con:entry>
          <con:entry>qualifiers.residentType.state</con:entry>
          <con:entry>qualifiers.loyaltyType.promotionType</con:entry>
          <con:entry>qualifiers.loyaltyType.loyaltyTier.name</con:entry>
          <con:entry>qualifiers.loyaltyType.loyaltyTier.value</con:entry>
          <con:entry>qualifiers.airType.promotionType</con:entry>
          <con:entry>qualifiers.airType.gateway</con:entry>
          <con:entry>qualifiers.priceScope</con:entry>
          <con:entry>qualifiers.qualifierScope</con:entry>
          <con:entry>qualifiers.searchScope</con:entry>
          <con:entry>resultsPreference.includeFacets</con:entry>
          <con:entry>resultsPreference.includeResults</con:entry>
          <con:entry>resultsPreference.includeOnlyIfPriceAvailable</con:entry>
          <con:entry>resultsPreference.sortBy</con:entry>
          <con:entry>resultsPreference.sortOrder</con:entry>
          <con:entry>resultsPreference.pagination.count</con:entry>
          <con:entry>resultsPreference.pagination.offset</con:entry>
          <con:entry>resultsPreference.strictSearch</con:entry>
          <con:entry>resultsPreference.groupBy</con:entry>
          <con:entry>resultsPreference.guestPricing</con:entry>
          <con:entry>resultsPreference.priceLevel.bestPricedCategory</con:entry>
          <con:entry>resultsPreference.priceLevel.cabinClass</con:entry>
          <con:entry>resultsPreference.bundleComponent.value</con:entry>
          <con:entry>resultsPreference.includePrices</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="89b87498-a72e-4cb6-82cc-f2e0725c5db6">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="ebf3fe91-429c-42b8-956d-9a28f38227dc">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="2cf7a0ce-3320-485b-9855-f9a288ccea21">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="d0e7f759-ab73-4867-a6c1-04c2a36e7f80">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="e3ebb3db-9dde-4834-9b33-a03688aa0e0c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="57a833c1-1c04-4cca-92f3-d8c492d4d635">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="2c5ae187-b2bb-4bd8-832d-84ff8194ed7f">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="8f3a309f-d6f4-489c-9861-4611d598e9b4">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="07590858-b342-4c54-8198-bedf1bc0ac61">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="40bf441a-bcdb-4db5-b3e7-470754e41840">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6420117f-650f-4baf-92a0-850ffdd2aa49">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="7a10e7fd-d882-4f61-b73b-6f4dcda11154">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="4e89681c-9601-4fb8-a9ef-234c3fd76897">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f8dfa3ed-98ae-4c72-819e-1f129985913f">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="cfd35c17-9793-420e-9f15-61622ba978ea">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="9922ee0f-40db-4a49-9447-17f361e3096c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="adb2fdf9-b64b-4691-95d1-df289b06431d">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="0833c981-c533-4700-abe7-81135fb5a38a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="7f6a785a-2702-40d0-9d34-84682b9da9d3">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="16f53452-9022-476e-9f4b-48f5bffe559a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="b81067df-dd43-4f98-805e-853175fd61e9">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="a75bec4f-654f-4b06-9c6e-7424ad504573">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f3ea9050-4e80-4d71-bbed-e23be33c100c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1328077e-edb5-4f23-99ac-ba2884c570c2">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="9395442b-b075-4c90-9dc7-175d79a7b708">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1a635486-274f-4491-b2dd-13fea67b7bdc">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="3c6154ae-6919-4433-b530-0006545db4d2">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="25855cac-8c80-49bd-93ff-6e22fcdde5d9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="f6d9482e-3953-4c54-a617-6a743f6ca440">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="0f63911f-118f-4814-9ee0-13a012cbd1ba">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="78366991-1005-4019-b46c-c36122958cb5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6fff4ff9-f0d4-4d0d-89e1-a5f205ec4546">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="d9c61de5-a3a7-4183-8bd0-92bf86872f5a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1b22dd5c-2e3d-4a03-a9b6-6798d35431d3">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6f3087d8-30e1-40b5-a7a0-c78078035746">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="05d1995b-507d-4e9b-a0ae-b4b3914430c6">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="c664df8a-1bc9-4fd0-b9df-f335d0d1d097">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="24ea1433-4f38-4a03-8999-7144deaddd02">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6f2a94fc-5033-4808-852b-651458fa5742">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f01e9d57-ab54-41f0-9a8a-043e0b93b4f5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="755bdcf9-70a8-4132-844d-e5cd8d24e80c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="47074864-6f72-4d97-bae4-21c8ed49aa75">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="b90fdab2-9475-4f32-8f02-297fa386bc5c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="30e190d4-5cca-4b41-a9d3-1723c6ff34d4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="361d8992-6d1c-42db-abc6-a3db88088a91">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="4ffc1287-e3e9-4aba-aa44-a81cbddd261a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="FetchValues" id="43db6608-5b9d-4620-bbef-2d421f1c41e8">
    <con:settings/>
    <con:config>
      <script>import java.io.*;
import java.util.*;
import com.eviware.soapui.model.testsuite.*
import com.eviware.soapui.impl.wsdl.teststeps.assertions.*
def tc = testRunner.testCase.testSuite.testCases["AssociateBookingToProfile_TestCase"];

def ts = testRunner.testCase.getTestStepByName("CruiseSearch")
def res = new XmlSlurper().parseText(ts.getPropertyValue("ResponseAsXml"));

def packageCode = res.resultsBySailing.sailingSummaryWithClassLevelPricing[5].sailingRef.@package.text();
testRunner.testCase.setPropertyValue("PackageCode",packageCode)

String shipCode= packageCode.substring(0,2);
testRunner.testCase.setPropertyValue("ShipCode",shipCode)

def sailDate = res.resultsBySailing.sailingSummaryWithClassLevelPricing[5].sailingRef.@saildate.text();
testRunner.testCase.setPropertyValue("SailDate",sailDate)

def id = res.resultsBySailing.sailingSummaryWithClassLevelPricing[5].cabinClassPricing[5].price[5].@priceId.text();
if(id.equals('')){
	def fareCode = res.resultsBySailing.sailingSummaryWithClassLevelPricing[5].cabinClassPricing[5].price[5].promotion.@id.text();
	testRunner.testCase.setPropertyValue("FareCode",fareCode)
}
else{
	testRunner.testCase.setPropertyValue("FareCode",id)
}</script>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="RetrieveStateroomCategories" id="39f4a37d-0b20-49e8-9c34-c71f050c493d">
    <con:settings/>
    <con:config service="Booking" resourcePath="/retrieveStateroomCategories" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="RetrieveStateroomCategories" id="3b0b3e64-59dd-4f3c-90fb-b77e895e64f7" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;con:entry key="AppKey" value="${#Project#AppKey}" xmlns:con="http://eviware.com/soapui/config"/></con:setting>
        </con:settings>
        <con:endpoint>${#Global#Booking_REST_Endpoint}</con:endpoint>
        <con:request/>
        <con:originalUri>http://eslbservicestst01.rccl.com/esl/booking/rest/v3/retrieveStateroomCategories</con:originalUri>
        <con:assertion type="Simple Contains" id="87273c98-143f-41f8-8047-28f1c10e7fb8" name="Contains">
          <con:configuration>
            <token>Success</token>
            <ignoreCase>false</ignoreCase>
            <useRegEx>false</useRegEx>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="82f97c47-2627-4917-92e0-4fcc5c872239" name="Match content of [status]">
          <con:configuration>
            <path>$['header']['status']</path>
            <content>Success</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="3bf48e71-960e-4904-ac1c-44c4e06fa78c" name="Match content of [status]">
          <con:configuration>
            <path>$['header']['status']</path>
            <content>Success</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:username xsi:nil="true"/>
          <con:password xsi:nil="true"/>
          <con:domain xsi:nil="true"/>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:parameters>
          <con:entry key="includeUpsell " value="${DataSource#Orchestration_includeUpsell}"/>
          <con:entry key="accessibleReqd" value="${DataSource#Orchestration_accessibleReqd}"/>
          <con:entry key="header.application" value="${DataSource#Orchestration_application}"/>
          <con:entry key="policeReqd" value="${DataSource#Orchestration_policeReqd}"/>
          <con:entry key="includeDeckInfo" value="${DataSource#Orchestration_includeDeckInfo}"/>
          <con:entry key="packageId" value="${#TestCase#PackageCode}"/>
          <con:entry key="militaryReqd" value="${DataSource#Orchestration_militaryReqd}"/>
          <con:entry key="includeAllStaterooms" value="${DataSource#Orchestration_includeAllStaterooms}"/>
          <con:entry key="officeCode" value=""/>
          <con:entry key="debugId" value=""/>
          <con:entry key="header.brand" value="${DataSource#Orchestration_brand}"/>
          <con:entry key="shipCode" value="${#TestCase#ShipCode}"/>
          <con:entry key="seniorReqd" value="${DataSource#Orchestration_seniorReqd}"/>
          <con:entry key="guestAge[0]" value="${DataSource#Orchestration_guestAge}"/>
          <con:entry key="countryCode" value="${DataSource#Orchestration_countryCode}"/>
          <con:entry key="fareCode" value="BESTRATE"/>
          <con:entry key="fireFighterReqd" value="${DataSource#Orchestration_fireFighterReqd}"/>
          <con:entry key="sailDate" value="${#TestCase#SailDate}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>header.application</con:entry>
          <con:entry>header.brand</con:entry>
          <con:entry>header.domainId</con:entry>
          <con:entry>header.language</con:entry>
          <con:entry>header.uuid</con:entry>
          <con:entry>countryCode</con:entry>
          <con:entry>agencyId</con:entry>
          <con:entry>bookingAccessToken</con:entry>
          <con:entry>bookingId</con:entry>
          <con:entry>shipCode</con:entry>
          <con:entry>sailDate</con:entry>
          <con:entry>packageId</con:entry>
          <con:entry>stateroomType</con:entry>
          <con:entry>currency</con:entry>
          <con:entry>guestAge[0]</con:entry>
          <con:entry>fareCode</con:entry>
          <con:entry>selectedFareCode</con:entry>
          <con:entry>numberOfCabins</con:entry>
          <con:entry>includeDeckInfo</con:entry>
          <con:entry>accessibleReqd</con:entry>
          <con:entry>seniorReqd</con:entry>
          <con:entry>militaryReqd</con:entry>
          <con:entry>policeReqd</con:entry>
          <con:entry>fireFighterReqd</con:entry>
          <con:entry>stateCode</con:entry>
          <con:entry>loyaltyId</con:entry>
          <con:entry>couponCodes</con:entry>
          <con:entry>includeAllStaterooms</con:entry>
          <con:entry>includeUpsell</con:entry>
          <con:entry>includePromoContent</con:entry>
          <con:entry>includeCategory</con:entry>
          <con:entry>debugId</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="7d1e8c91-121f-4b55-96d1-8ca75c1cd945">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="aefc0c06-2768-4736-a8d8-fcad7da98c16">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="706edc95-d046-4617-ae79-da8bc2c4ae4b">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="8f3a309f-d6f4-489c-9861-4611d598e9b4">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="07590858-b342-4c54-8198-bedf1bc0ac61">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="40bf441a-bcdb-4db5-b3e7-470754e41840">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6420117f-650f-4baf-92a0-850ffdd2aa49">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="7a10e7fd-d882-4f61-b73b-6f4dcda11154">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="4e89681c-9601-4fb8-a9ef-234c3fd76897">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f8dfa3ed-98ae-4c72-819e-1f129985913f">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="cfd35c17-9793-420e-9f15-61622ba978ea">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="9922ee0f-40db-4a49-9447-17f361e3096c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="adb2fdf9-b64b-4691-95d1-df289b06431d">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="0833c981-c533-4700-abe7-81135fb5a38a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="7f6a785a-2702-40d0-9d34-84682b9da9d3">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="16f53452-9022-476e-9f4b-48f5bffe559a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="b81067df-dd43-4f98-805e-853175fd61e9">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="a75bec4f-654f-4b06-9c6e-7424ad504573">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f3ea9050-4e80-4d71-bbed-e23be33c100c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1328077e-edb5-4f23-99ac-ba2884c570c2">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="9395442b-b075-4c90-9dc7-175d79a7b708">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1a635486-274f-4491-b2dd-13fea67b7bdc">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="3c6154ae-6919-4433-b530-0006545db4d2">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="25855cac-8c80-49bd-93ff-6e22fcdde5d9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="f6d9482e-3953-4c54-a617-6a743f6ca440">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="0f63911f-118f-4814-9ee0-13a012cbd1ba">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="78366991-1005-4019-b46c-c36122958cb5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6fff4ff9-f0d4-4d0d-89e1-a5f205ec4546">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="d9c61de5-a3a7-4183-8bd0-92bf86872f5a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1b22dd5c-2e3d-4a03-a9b6-6798d35431d3">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6f3087d8-30e1-40b5-a7a0-c78078035746">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="05d1995b-507d-4e9b-a0ae-b4b3914430c6">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="c664df8a-1bc9-4fd0-b9df-f335d0d1d097">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="24ea1433-4f38-4a03-8999-7144deaddd02">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6f2a94fc-5033-4808-852b-651458fa5742">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f01e9d57-ab54-41f0-9a8a-043e0b93b4f5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="755bdcf9-70a8-4132-844d-e5cd8d24e80c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="47074864-6f72-4d97-bae4-21c8ed49aa75">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="b90fdab2-9475-4f32-8f02-297fa386bc5c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="30e190d4-5cca-4b41-a9d3-1723c6ff34d4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="361d8992-6d1c-42db-abc6-a3db88088a91">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="4ffc1287-e3e9-4aba-aa44-a81cbddd261a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="FetchCategoryCode" id="480c1062-058e-4039-9f71-1c574bf04c87">
    <con:settings/>
    <con:config>
      <script>import java.io.*;
import java.util.*;
import com.eviware.soapui.model.testsuite.*
import com.eviware.soapui.impl.wsdl.teststeps.assertions.*
def tc = testRunner.testCase.testSuite.testCases["AssociateBookingToProfile_TestCase"];

def ts = testRunner.testCase.getTestStepByName("RetrieveStateroomCategories")
def res = new XmlSlurper().parseText(ts.getPropertyValue("ResponseAsXml"));

def categoryCode = res.stateroomCategoryTypes.e[0].categories.e[0].stateroomCategoryCode.text();
testRunner.testCase.setPropertyValue("CategoryCode",categoryCode)

def selectedFareCode = res.stateroomCategoryTypes.e[0].categories.e[0].selectedFareCode.text();
testRunner.testCase.setPropertyValue("FareCode",selectedFareCode)</script>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="RetrieveStateroomForCategory" id="0c0a24d7-0f16-4821-9eb2-9f580cdc6ceb">
    <con:settings/>
    <con:config service="Booking" resourcePath="/retrieveStateroomsForCategory" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="RetrieveStateroomForCategory" id="c2271e12-b35c-4d4d-99ab-12aa471a0db9" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="AppKey" value="${#Project#AppKey}" xmlns="http://eviware.com/soapui/config"/></con:setting>
        </con:settings>
        <con:endpoint>${#Global#Booking_REST_Endpoint}</con:endpoint>
        <con:request/>
        <con:originalUri>http://eslbservicestst01.rccl.com/esl/booking/rest/v3/retrieveStateroomsForCategory</con:originalUri>
        <con:assertion type="Simple Contains" id="db7e7f9b-4711-4aa9-88e0-337d918cd9b9" name="Contains">
          <con:configuration>
            <token>Success</token>
            <ignoreCase>false</ignoreCase>
            <useRegEx>false</useRegEx>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="618527e3-2af8-4c1d-8756-b36339076d3b" name="Match content of [status]">
          <con:configuration>
            <path>$['header']['status']</path>
            <content>Success</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="bab96bf1-6163-4880-a45b-bb9c4d8848b0" name="Match content of [status]">
          <con:configuration>
            <path>$['header']['status']</path>
            <content>Success</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:username xsi:nil="true"/>
          <con:password xsi:nil="true"/>
          <con:domain xsi:nil="true"/>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:parameters>
          <con:entry key="header.application" value="${DataSource#Orchestration_application}"/>
          <con:entry key="stateroomOccupancy.guestAge" value="${DataSource#Orchestration_guestAge}"/>
          <con:entry key="countryCode" value="${DataSource#Orchestration_countryCode}"/>
          <con:entry key="stateroomOccupancy.seniorReqd" value="${DataSource#Orchestration_seniorReqd}"/>
          <con:entry key="packageId" value="${#TestCase#PackageCode}"/>
          <con:entry key="debugId" value=""/>
          <con:entry key="categoryCode" value="${#TestCase#CategoryCode}"/>
          <con:entry key="header.brand" value="${DataSource#Orchestration_brand}"/>
          <con:entry key="sailDate" value="${#TestCase#SailDate}"/>
          <con:entry key="stateroomOccupancy.accessibleReqd" value="${DataSource#Orchestration_accessibleReqd}"/>
          <con:entry key="shipCode" value="${#TestCase#ShipCode}"/>
          <con:entry key="stateroomOccupancy.fareCode" value="${#TestCase#FareCode}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>header.application</con:entry>
          <con:entry>header.brand</con:entry>
          <con:entry>header.domainId</con:entry>
          <con:entry>header.language</con:entry>
          <con:entry>header.uuid</con:entry>
          <con:entry>countryCode</con:entry>
          <con:entry>agencyId</con:entry>
          <con:entry>bookingAccessToken</con:entry>
          <con:entry>shipCode</con:entry>
          <con:entry>sailDate</con:entry>
          <con:entry>packageId</con:entry>
          <con:entry>categoryCode</con:entry>
          <con:entry>currencyCode</con:entry>
          <con:entry>stateroomOccupancy.guestAge</con:entry>
          <con:entry>stateroomOccupancy.fareCode</con:entry>
          <con:entry>stateroomOccupancy.seniorReqd</con:entry>
          <con:entry>stateroomOccupancy.accessibleReqd</con:entry>
          <con:entry>deckCode</con:entry>
          <con:entry>debugId</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="7d1e8c91-121f-4b55-96d1-8ca75c1cd945">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="aefc0c06-2768-4736-a8d8-fcad7da98c16">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="706edc95-d046-4617-ae79-da8bc2c4ae4b">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="8f3a309f-d6f4-489c-9861-4611d598e9b4">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="07590858-b342-4c54-8198-bedf1bc0ac61">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="40bf441a-bcdb-4db5-b3e7-470754e41840">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6420117f-650f-4baf-92a0-850ffdd2aa49">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="7a10e7fd-d882-4f61-b73b-6f4dcda11154">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="4e89681c-9601-4fb8-a9ef-234c3fd76897">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f8dfa3ed-98ae-4c72-819e-1f129985913f">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="cfd35c17-9793-420e-9f15-61622ba978ea">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="9922ee0f-40db-4a49-9447-17f361e3096c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="adb2fdf9-b64b-4691-95d1-df289b06431d">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="0833c981-c533-4700-abe7-81135fb5a38a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="7f6a785a-2702-40d0-9d34-84682b9da9d3">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="16f53452-9022-476e-9f4b-48f5bffe559a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="b81067df-dd43-4f98-805e-853175fd61e9">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="a75bec4f-654f-4b06-9c6e-7424ad504573">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f3ea9050-4e80-4d71-bbed-e23be33c100c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1328077e-edb5-4f23-99ac-ba2884c570c2">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="9395442b-b075-4c90-9dc7-175d79a7b708">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1a635486-274f-4491-b2dd-13fea67b7bdc">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="3c6154ae-6919-4433-b530-0006545db4d2">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="25855cac-8c80-49bd-93ff-6e22fcdde5d9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="f6d9482e-3953-4c54-a617-6a743f6ca440">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="0f63911f-118f-4814-9ee0-13a012cbd1ba">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="78366991-1005-4019-b46c-c36122958cb5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6fff4ff9-f0d4-4d0d-89e1-a5f205ec4546">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="d9c61de5-a3a7-4183-8bd0-92bf86872f5a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1b22dd5c-2e3d-4a03-a9b6-6798d35431d3">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6f3087d8-30e1-40b5-a7a0-c78078035746">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="05d1995b-507d-4e9b-a0ae-b4b3914430c6">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="c664df8a-1bc9-4fd0-b9df-f335d0d1d097">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="24ea1433-4f38-4a03-8999-7144deaddd02">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6f2a94fc-5033-4808-852b-651458fa5742">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f01e9d57-ab54-41f0-9a8a-043e0b93b4f5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="755bdcf9-70a8-4132-844d-e5cd8d24e80c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="47074864-6f72-4d97-bae4-21c8ed49aa75">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="b90fdab2-9475-4f32-8f02-297fa386bc5c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="30e190d4-5cca-4b41-a9d3-1723c6ff34d4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="361d8992-6d1c-42db-abc6-a3db88088a91">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="4ffc1287-e3e9-4aba-aa44-a81cbddd261a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="FetchCabinNumber" id="6c1267ae-c869-4be5-b83a-e943b48ca46f">
    <con:settings/>
    <con:config>
      <script>import java.io.*;
import java.util.*;
import com.eviware.soapui.model.testsuite.*
import com.eviware.soapui.impl.wsdl.teststeps.assertions.*
def tc = testRunner.testCase.testSuite.testCases["AssociateBookingToProfile_TestCase"];

def ts = testRunner.testCase.getTestStepByName("RetrieveStateroomForCategory")
def res = new XmlSlurper().parseText(ts.getPropertyValue("ResponseAsXml"));

def cabinNumber = res.cabin.e[0].cabinNumber.text();
testRunner.testCase.setPropertyValue("CabinNumber",cabinNumber)</script>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="UpdateStateroomLock" id="a5422007-af8c-47ae-9e90-b23fd6472773">
    <con:settings/>
    <con:config service="Booking" resourcePath="/updateStateroomLock" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="UpdateStateroomLock" id="2f932aaa-b326-4cd4-b9dc-1ac157bd6457" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="AppKey" value="${#Project#AppKey}" xmlns="http://eviware.com/soapui/config"/></con:setting>
        </con:settings>
        <con:endpoint>${#Global#Booking_REST_Endpoint}</con:endpoint>
        <con:request>{
    "header": {
        "application": "${DataSource#Orchestration_application}",
        "brand": "${DataSource#Orchestration_brand}"
    },
    "countryCode": "${DataSource#Orchestration_countryCode}",
    "shipCode": "${#TestCase#ShipCode}",
    "sailDate": "${#TestCase#SailDate}",
    "lockStaterooms":{
      "fareCode":"${#TestCase#FareCode}",
      "stateroomCategoryCode":"${#TestCase#CategoryCode}",
      "guestCount":"${DataSource#Orchestration_guestCount}",
      "stateroomNumber":["${#TestCase#CabinNumber}"]
    }
}</con:request>
        <con:originalUri>http://eslbservicestst01.rccl.com/esl/booking/rest/v3/updateStateroomLock</con:originalUri>
        <con:assertion type="Simple Contains" id="82543d96-a0c1-4f53-9faf-994d5c13bc71" name="Contains">
          <con:configuration>
            <token>Success</token>
            <ignoreCase>false</ignoreCase>
            <useRegEx>false</useRegEx>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="1a839518-cb7e-4378-ad09-ebe0c9ff477a" name="Match content of [status]">
          <con:configuration>
            <path>$['header']['status']</path>
            <content>Success</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="65c8dcba-4d4a-43ba-8da4-aa93a7e7fe34" name="Match content of [status]">
          <con:configuration>
            <path>$['header']['status']</path>
            <content>Success</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:username xsi:nil="true"/>
          <con:password xsi:nil="true"/>
          <con:domain xsi:nil="true"/>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:parameters/>
        <con:parameterOrder/>
        <con:environmentSpec>
          <con:entry environmentId="7d1e8c91-121f-4b55-96d1-8ca75c1cd945">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="aefc0c06-2768-4736-a8d8-fcad7da98c16">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="706edc95-d046-4617-ae79-da8bc2c4ae4b">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="8f3a309f-d6f4-489c-9861-4611d598e9b4">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="07590858-b342-4c54-8198-bedf1bc0ac61">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="40bf441a-bcdb-4db5-b3e7-470754e41840">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6420117f-650f-4baf-92a0-850ffdd2aa49">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="7a10e7fd-d882-4f61-b73b-6f4dcda11154">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="4e89681c-9601-4fb8-a9ef-234c3fd76897">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f8dfa3ed-98ae-4c72-819e-1f129985913f">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="cfd35c17-9793-420e-9f15-61622ba978ea">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="9922ee0f-40db-4a49-9447-17f361e3096c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="adb2fdf9-b64b-4691-95d1-df289b06431d">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="0833c981-c533-4700-abe7-81135fb5a38a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="7f6a785a-2702-40d0-9d34-84682b9da9d3">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="16f53452-9022-476e-9f4b-48f5bffe559a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="b81067df-dd43-4f98-805e-853175fd61e9">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="a75bec4f-654f-4b06-9c6e-7424ad504573">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f3ea9050-4e80-4d71-bbed-e23be33c100c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1328077e-edb5-4f23-99ac-ba2884c570c2">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="9395442b-b075-4c90-9dc7-175d79a7b708">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1a635486-274f-4491-b2dd-13fea67b7bdc">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="3c6154ae-6919-4433-b530-0006545db4d2">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="25855cac-8c80-49bd-93ff-6e22fcdde5d9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="f6d9482e-3953-4c54-a617-6a743f6ca440">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="0f63911f-118f-4814-9ee0-13a012cbd1ba">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="78366991-1005-4019-b46c-c36122958cb5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6fff4ff9-f0d4-4d0d-89e1-a5f205ec4546">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="d9c61de5-a3a7-4183-8bd0-92bf86872f5a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1b22dd5c-2e3d-4a03-a9b6-6798d35431d3">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6f3087d8-30e1-40b5-a7a0-c78078035746">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="05d1995b-507d-4e9b-a0ae-b4b3914430c6">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="c664df8a-1bc9-4fd0-b9df-f335d0d1d097">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="24ea1433-4f38-4a03-8999-7144deaddd02">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6f2a94fc-5033-4808-852b-651458fa5742">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f01e9d57-ab54-41f0-9a8a-043e0b93b4f5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="755bdcf9-70a8-4132-844d-e5cd8d24e80c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="47074864-6f72-4d97-bae4-21c8ed49aa75">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="b90fdab2-9475-4f32-8f02-297fa386bc5c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="30e190d4-5cca-4b41-a9d3-1723c6ff34d4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="361d8992-6d1c-42db-abc6-a3db88088a91">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="4ffc1287-e3e9-4aba-aa44-a81cbddd261a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="FetchBookingAccessToken" id="b5eec9d8-aabe-44b2-b01a-e7581d9a9592">
    <con:settings/>
    <con:config>
      <script>import java.io.*;
import java.util.*;
import com.eviware.soapui.model.testsuite.*
import com.eviware.soapui.impl.wsdl.teststeps.assertions.*
def tc = testRunner.testCase.testSuite.testCases["AssociateBookingToProfile_TestCase"];

def ts = testRunner.testCase.getTestStepByName("UpdateStateroomLock")
def res = new XmlSlurper().parseText(ts.getPropertyValue("ResponseAsXml"));

def accessToken = res.bookingAccessToken.text();
testRunner.testCase.setPropertyValue("AccessToken",accessToken)</script>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="CreateBooking" id="aa148969-30ff-4ec1-923b-d98503d9c0e2">
    <con:settings/>
    <con:config service="Booking" resourcePath="/createBooking" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="CreateBooking" id="cbf02e47-352b-4b08-9c0d-a81f52bd33c9" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;con:entry key="AppKey" value="${#Project#AppKey}" xmlns:con="http://eviware.com/soapui/config"/></con:setting>
        </con:settings>
        <con:endpoint>${#Global#Booking_REST_Endpoint}</con:endpoint>
        <con:request>{\r
   "header" : {\r
      "application" : "${DataSource#Orchestration_application}",\r
      "brand" : "${DataSource#Orchestration_brand}",\r
      "domainId" : "${DataSource#Orchestration_domainId}"\r
   },\r
   "countryCode" : "${DataSource#Orchestration_countryCode}",\r
   "bookingAccessToken" : "${#TestCase#AccessToken}",\r
   "sailingInfo" : {\r
      "shipCode" : "${#TestCase#ShipCode}",\r
      "sailDate" : "${#TestCase#SailDate}",\r
      "packageCode" : "${#TestCase#PackageCode}",\r
      "currencyCode" : "${DataSource#Orchestration_currencyCode}"\r
   },\r
   "reservations" : [\r
      {\r
         "cabin" : {\r
            "berthedCategoryCode" : "${#TestCase#CategoryCode}",\r
            "fareCode" : "${#TestCase#FareCode}",\r
            "pricedCategoryCode" : "${#TestCase#CategoryCode}",\r
            "waitListed" : "${DataSource#Orchestration_dine waitListed}",\r
            "number" : "${#TestCase#CabinNumber}"\r
         },\r
         "dining" : [\r
            {\r
               "sitting" : "${DataSource#Orchestration_sitting}",\r
               "sittingType" : "${DataSource#Orchestration_sittingType}",\r
               "sittingInstance" : "${DataSource#Orchestration_sittingInstance}",\r
               "waitListed" : "${DataSource#Orchestration_dine waitListed}"\r
            }\r
         ],\r
         "gratuitiesPrepaid" : "${DataSource#Orchestration_gratuitiesPrepaid}",\r
         "fareQualifiers" : {\r
            "seniorReqd" : "${DataSource#Orchestration_seniorReqd}",\r
            "militaryReqd" : "${DataSource#Orchestration_militaryReqd}",\r
            "policeReqd" : "${DataSource#Orchestration_policeReqd}",\r
            "fireFighterReqd" : "${DataSource#Orchestration_fireFighterReqd}"\r
         },\r
         "guestDetails" : [\r
            {\r
               "guestContact" : {\r
                  "personalInfo" : {\r
                     "name" : {\r
                        "firstName" : "${DataSource#Orchestration_firstName}",\r
                        "lastName" : "${DataSource#Orchestration_lastName}"\r
                     },\r
                     "age" : "${DataSource#Orchestration_age}",\r
                     "birthDate" : "${DataSource#Orchestration_birthDate}",\r
                     "gender" : "${DataSource#Orchestration_gender}",\r
                     "nationality" : "${DataSource#Orchestration_countryCode}"\r
                  },\r
                  "telephoneInfo" : {\r
                     "telephoneNumber" : "${DataSource#Orchestration_telephoneNumber}",\r
                     "telephoneCountryCode" : "${DataSource#Orchestration_telephoneCountryCode}",\r
                     "telephoneType" : "${DataSource#Orchestration_telephoneType}"\r
                  },\r
                  "address" : {\r
                     "address1" : "${DataSource#Orchestration_address1}",\r
                     "city" : "${DataSource#Orchestration_city}",\r
                     "stateCode" : "${DataSource#Orchestration_stateCode}",\r
                     "postalCode" : "${DataSource#Orchestration_postalCode}",\r
                     "countryName" : "${DataSource#Orchestration_countryCode}"\r
                  },\r
                  "email" : "${DataSource#Orchestration_email}"\r
               },\r
               "cruiseDocument" : {\r
                  "deliveryMethod" : "${DataSource#Orchestration_deliveryMethod}"\r
               }\r
            }\r
         ],\r
         "listOfCardPayments" : {\r
            "cardPayment" : [\r
               {\r
                  "cardType" : "${DataSource#Orchestration_cardType}",\r
                  "cardToken" : "${DataSource#Orchestration_cardToken}",\r
                  "expireDate" : "${DataSource#Orchestration_expireDate}",\r
                  "amount" : "${DataSource#Orchestration_amount}",\r
                  "currency" : "${DataSource#Orchestration_currencyCode}",\r
                  "extendPayments" : "${DataSource#Orchestration_extendPayments}",\r
                  "contact" : {\r
                     "firstName" : "${DataSource#Orchestration_firstName}",\r
                     "lastName" : "${DataSource#Orchestration_lastName}",\r
                     "address" : {\r
                        "address1" : "${DataSource#Orchestration_address1}",\r
                        "city" : "${DataSource#Orchestration_city}",\r
                        "stateCode" : "${DataSource#Orchestration_stateCode}",\r
                        "postalCode" : "${DataSource#Orchestration_postalCode}",\r
                        "countryName" : "${DataSource#Orchestration_countryCode}"\r
                     }\r
                  }\r
               }\r
            ]\r
         }\r
      }\r
   ],\r
   "courtesyHold" : "${DataSource#Orchestration_courtesyHold}"\r
}</con:request>
        <con:originalUri>http://eslbservicestst01.rccl.com/esl/booking/rest/v3/createBooking</con:originalUri>
        <con:assertion type="Simple Contains" id="dd871da8-b308-43c7-9273-88df668b26a0" name="Contains">
          <con:configuration>
            <token>Success</token>
            <ignoreCase>false</ignoreCase>
            <useRegEx>false</useRegEx>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="1608e61f-ecd9-4554-aa1c-d2259c84f84b" name="Match content of [status]">
          <con:configuration>
            <path>$['header']['status']</path>
            <content>Success</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="332f30fc-15e7-48f3-bb7a-298102eb5624" name="Match content of [status]">
          <con:configuration>
            <path>$['header']['status']</path>
            <content>Success</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:username xsi:nil="true"/>
          <con:password xsi:nil="true"/>
          <con:domain xsi:nil="true"/>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:parameters/>
        <con:environmentSpec>
          <con:entry environmentId="7d1e8c91-121f-4b55-96d1-8ca75c1cd945">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="aefc0c06-2768-4736-a8d8-fcad7da98c16">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="706edc95-d046-4617-ae79-da8bc2c4ae4b">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="8f3a309f-d6f4-489c-9861-4611d598e9b4">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="07590858-b342-4c54-8198-bedf1bc0ac61">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="40bf441a-bcdb-4db5-b3e7-470754e41840">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6420117f-650f-4baf-92a0-850ffdd2aa49">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="7a10e7fd-d882-4f61-b73b-6f4dcda11154">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="4e89681c-9601-4fb8-a9ef-234c3fd76897">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f8dfa3ed-98ae-4c72-819e-1f129985913f">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="cfd35c17-9793-420e-9f15-61622ba978ea">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="9922ee0f-40db-4a49-9447-17f361e3096c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="adb2fdf9-b64b-4691-95d1-df289b06431d">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="0833c981-c533-4700-abe7-81135fb5a38a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="7f6a785a-2702-40d0-9d34-84682b9da9d3">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="16f53452-9022-476e-9f4b-48f5bffe559a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="b81067df-dd43-4f98-805e-853175fd61e9">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="a75bec4f-654f-4b06-9c6e-7424ad504573">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f3ea9050-4e80-4d71-bbed-e23be33c100c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1328077e-edb5-4f23-99ac-ba2884c570c2">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="9395442b-b075-4c90-9dc7-175d79a7b708">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1a635486-274f-4491-b2dd-13fea67b7bdc">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="3c6154ae-6919-4433-b530-0006545db4d2">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="25855cac-8c80-49bd-93ff-6e22fcdde5d9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="f6d9482e-3953-4c54-a617-6a743f6ca440">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="0f63911f-118f-4814-9ee0-13a012cbd1ba">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="78366991-1005-4019-b46c-c36122958cb5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6fff4ff9-f0d4-4d0d-89e1-a5f205ec4546">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="d9c61de5-a3a7-4183-8bd0-92bf86872f5a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1b22dd5c-2e3d-4a03-a9b6-6798d35431d3">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6f3087d8-30e1-40b5-a7a0-c78078035746">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="05d1995b-507d-4e9b-a0ae-b4b3914430c6">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="c664df8a-1bc9-4fd0-b9df-f335d0d1d097">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="24ea1433-4f38-4a03-8999-7144deaddd02">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6f2a94fc-5033-4808-852b-651458fa5742">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f01e9d57-ab54-41f0-9a8a-043e0b93b4f5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="755bdcf9-70a8-4132-844d-e5cd8d24e80c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="47074864-6f72-4d97-bae4-21c8ed49aa75">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="b90fdab2-9475-4f32-8f02-297fa386bc5c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="30e190d4-5cca-4b41-a9d3-1723c6ff34d4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="361d8992-6d1c-42db-abc6-a3db88088a91">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="4ffc1287-e3e9-4aba-aa44-a81cbddd261a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="FetchBookingId" id="da11b8d4-6eb3-4261-93f2-c3eddd50e2b8">
    <con:settings/>
    <con:config>
      <script>import java.io.*;
import java.util.*;
import com.eviware.soapui.model.testsuite.*
import com.eviware.soapui.impl.wsdl.teststeps.assertions.*
def tc = testRunner.testCase.testSuite.testCases["AssociateBookingToProfile_TestCase"];

def ts = testRunner.testCase.getTestStepByName("CreateBooking")
def res = new XmlSlurper().parseText(ts.getPropertyValue("ResponseAsXml"));

def bookingId = res.bookingConfirmation.bookingId.text();
testRunner.testCase.setPropertyValue("BookingId",bookingId)</script>
    </con:config>
  </con:testStep>
  <con:testStep type="delay" name="Delay" id="aa03abcf-7990-463e-8b0a-b2e27f6de8e6">
    <con:settings/>
    <con:config>
      <delay>3000</delay>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="RetrieveBooking" id="7c408068-8f42-45fe-8f1e-fec7a07db9de">
    <con:settings/>
    <con:config service="Booking" resourcePath="/retrieveBooking" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="RetrieveBooking" id="f61292d7-a3d7-4c9c-a450-ddf89edb6e6e" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="AppKey" value="${#Project#AppKey}" xmlns="http://eviware.com/soapui/config"/></con:setting>
        </con:settings>
        <con:endpoint>${#Global#Booking_REST_Endpoint}</con:endpoint>
        <con:request/>
        <con:originalUri>http://eslbservicestst01.rccl.com/esl/booking/rest/v3/retrieveBooking</con:originalUri>
        <con:assertion type="Simple Contains" id="12b670fa-e7d6-49b8-9a59-6568ca7100b8" name="Contains">
          <con:configuration>
            <token>Success</token>
            <ignoreCase>false</ignoreCase>
            <useRegEx>false</useRegEx>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="94b5b7d9-771c-41a8-98e2-1b99a0a5add9" name="Match content of [status]">
          <con:configuration>
            <path>$['header']['status']</path>
            <content>Success</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="6a657a5d-7fe3-4016-a334-d8cf73a2baa7" name="Match content of [status]">
          <con:configuration>
            <path>$['header']['status']</path>
            <content>Success</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:username xsi:nil="true"/>
          <con:password xsi:nil="true"/>
          <con:domain xsi:nil="true"/>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:parameters>
          <con:entry key="lastName" value="${DataSource#Orchestration_lastName}"/>
          <con:entry key="header.application" value="${DataSource#Orchestration_application}"/>
          <con:entry key="lockBooking" value="true"/>
          <con:entry key="countryCode" value="${DataSource#Orchestration_countryCode}"/>
          <con:entry key="summaryRequested" value="false"/>
          <con:entry key="header.brand" value="${DataSource#Orchestration_brand}"/>
          <con:entry key="sailDate" value="${#TestCase#SailDate}"/>
          <con:entry key="bookingId" value="${#TestCase#BookingId}"/>
          <con:entry key="shipCode" value="${#TestCase#ShipCode}"/>
        </con:parameters>
        <con:environmentSpec>
          <con:entry environmentId="7d1e8c91-121f-4b55-96d1-8ca75c1cd945">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="aefc0c06-2768-4736-a8d8-fcad7da98c16">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="706edc95-d046-4617-ae79-da8bc2c4ae4b">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="8f3a309f-d6f4-489c-9861-4611d598e9b4">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="07590858-b342-4c54-8198-bedf1bc0ac61">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="40bf441a-bcdb-4db5-b3e7-470754e41840">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6420117f-650f-4baf-92a0-850ffdd2aa49">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="7a10e7fd-d882-4f61-b73b-6f4dcda11154">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="4e89681c-9601-4fb8-a9ef-234c3fd76897">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f8dfa3ed-98ae-4c72-819e-1f129985913f">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="cfd35c17-9793-420e-9f15-61622ba978ea">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="9922ee0f-40db-4a49-9447-17f361e3096c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="adb2fdf9-b64b-4691-95d1-df289b06431d">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="0833c981-c533-4700-abe7-81135fb5a38a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="7f6a785a-2702-40d0-9d34-84682b9da9d3">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="16f53452-9022-476e-9f4b-48f5bffe559a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="b81067df-dd43-4f98-805e-853175fd61e9">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="a75bec4f-654f-4b06-9c6e-7424ad504573">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f3ea9050-4e80-4d71-bbed-e23be33c100c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1328077e-edb5-4f23-99ac-ba2884c570c2">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="9395442b-b075-4c90-9dc7-175d79a7b708">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1a635486-274f-4491-b2dd-13fea67b7bdc">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="3c6154ae-6919-4433-b530-0006545db4d2">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="25855cac-8c80-49bd-93ff-6e22fcdde5d9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="f6d9482e-3953-4c54-a617-6a743f6ca440">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="0f63911f-118f-4814-9ee0-13a012cbd1ba">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="78366991-1005-4019-b46c-c36122958cb5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6fff4ff9-f0d4-4d0d-89e1-a5f205ec4546">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="d9c61de5-a3a7-4183-8bd0-92bf86872f5a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1b22dd5c-2e3d-4a03-a9b6-6798d35431d3">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6f3087d8-30e1-40b5-a7a0-c78078035746">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="05d1995b-507d-4e9b-a0ae-b4b3914430c6">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="c664df8a-1bc9-4fd0-b9df-f335d0d1d097">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="24ea1433-4f38-4a03-8999-7144deaddd02">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6f2a94fc-5033-4808-852b-651458fa5742">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f01e9d57-ab54-41f0-9a8a-043e0b93b4f5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="755bdcf9-70a8-4132-844d-e5cd8d24e80c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="47074864-6f72-4d97-bae4-21c8ed49aa75">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="b90fdab2-9475-4f32-8f02-297fa386bc5c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="30e190d4-5cca-4b41-a9d3-1723c6ff34d4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="361d8992-6d1c-42db-abc6-a3db88088a91">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="4ffc1287-e3e9-4aba-aa44-a81cbddd261a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="FetchAccessToken" id="411b2b40-f8c3-4274-8c1b-6d1b02633f6a">
    <con:settings/>
    <con:config>
      <script>import java.io.*;
import java.util.*;
import com.eviware.soapui.model.testsuite.*
import com.eviware.soapui.impl.wsdl.teststeps.assertions.*
def tc = testRunner.testCase.testSuite.testCases["AssociateBookingToProfile_TestCase"];

def ts = testRunner.testCase.getTestStepByName("RetrieveBooking")
def res = new XmlSlurper().parseText(ts.getPropertyValue("ResponseAsXml"));

def bookingAccessToken = res.bookingAccessToken.text();
testRunner.testCase.setPropertyValue("BookingAccessToken",bookingAccessToken)</script>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="RetrieveTerminalId" id="c3cb0593-d2d9-4f9d-aeb1-1513053c5ffa">
    <con:settings/>
    <con:config service="Booking" resourcePath="/retrieveTerminalId" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="RetrieveTerminalId" id="5c29f544-0781-475f-b6af-6563dd42f958" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="AppKey" value="${#Project#AppKey}" xmlns="http://eviware.com/soapui/config"/></con:setting>
        </con:settings>
        <con:request/>
        <con:originalUri>http://stg1.mesos.rccl.com/booking-stg1/v4/booking/rest/v3/retrieveTerminalId</con:originalUri>
        <con:assertion type="JsonPath Match" id="07bc5ac4-1ebd-49c7-b7be-1bbb0df940b1" name="Match content of [status]">
          <con:configuration>
            <path>$['header']['status']</path>
            <content>Success</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="0da2a3de-3fc2-4efc-8e7d-32a5afed9bea" name="Match content of [status]">
          <con:configuration>
            <path>$['header']['status']</path>
            <content>Success</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:parameters>
          <con:entry key="header.language" value="${DataSource#language}"/>
          <con:entry key="header.application" value="${DataSource#application}"/>
          <con:entry key="countryCode" value="${DataSource#countryCode}"/>
          <con:entry key="bookingAccessToken" value="${#TestCase#BookingAccessToken}"/>
          <con:entry key="header.domainId" value="${DataSource#domainId}"/>
          <con:entry key="header.brand" value="${DataSource#brand}"/>
          <con:entry key="bookingId" value="${#TestCase#BookingId}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>header.application</con:entry>
          <con:entry>header.brand</con:entry>
          <con:entry>header.domainId</con:entry>
          <con:entry>header.language</con:entry>
          <con:entry>countryCode</con:entry>
          <con:entry>bookingId</con:entry>
          <con:entry>bookingAccessToken</con:entry>
          <con:entry>agencyId</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="8f3a309f-d6f4-489c-9861-4611d598e9b4">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="07590858-b342-4c54-8198-bedf1bc0ac61">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="40bf441a-bcdb-4db5-b3e7-470754e41840">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6420117f-650f-4baf-92a0-850ffdd2aa49">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="7a10e7fd-d882-4f61-b73b-6f4dcda11154">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="4e89681c-9601-4fb8-a9ef-234c3fd76897">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f8dfa3ed-98ae-4c72-819e-1f129985913f">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="cfd35c17-9793-420e-9f15-61622ba978ea">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="9922ee0f-40db-4a49-9447-17f361e3096c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="adb2fdf9-b64b-4691-95d1-df289b06431d">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="0833c981-c533-4700-abe7-81135fb5a38a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="7f6a785a-2702-40d0-9d34-84682b9da9d3">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="16f53452-9022-476e-9f4b-48f5bffe559a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="b81067df-dd43-4f98-805e-853175fd61e9">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="a75bec4f-654f-4b06-9c6e-7424ad504573">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f3ea9050-4e80-4d71-bbed-e23be33c100c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1328077e-edb5-4f23-99ac-ba2884c570c2">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="9395442b-b075-4c90-9dc7-175d79a7b708">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1a635486-274f-4491-b2dd-13fea67b7bdc">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="3c6154ae-6919-4433-b530-0006545db4d2">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="25855cac-8c80-49bd-93ff-6e22fcdde5d9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="f6d9482e-3953-4c54-a617-6a743f6ca440">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="0f63911f-118f-4814-9ee0-13a012cbd1ba">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="78366991-1005-4019-b46c-c36122958cb5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6fff4ff9-f0d4-4d0d-89e1-a5f205ec4546">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="d9c61de5-a3a7-4183-8bd0-92bf86872f5a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1b22dd5c-2e3d-4a03-a9b6-6798d35431d3">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6f3087d8-30e1-40b5-a7a0-c78078035746">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="05d1995b-507d-4e9b-a0ae-b4b3914430c6">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="c664df8a-1bc9-4fd0-b9df-f335d0d1d097">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="24ea1433-4f38-4a03-8999-7144deaddd02">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6f2a94fc-5033-4808-852b-651458fa5742">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f01e9d57-ab54-41f0-9a8a-043e0b93b4f5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="755bdcf9-70a8-4132-844d-e5cd8d24e80c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="47074864-6f72-4d97-bae4-21c8ed49aa75">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="b90fdab2-9475-4f32-8f02-297fa386bc5c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="30e190d4-5cca-4b41-a9d3-1723c6ff34d4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="361d8992-6d1c-42db-abc6-a3db88088a91">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="4ffc1287-e3e9-4aba-aa44-a81cbddd261a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="RetrieveTerminalId with international countryCode" id="1912e6af-dd0c-44fa-b6a1-a81a4797e365">
    <con:settings/>
    <con:config service="Booking" resourcePath="/retrieveTerminalId" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="RetrieveTerminalId with international countryCode" id="5c29f544-0781-475f-b6af-6563dd42f958" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="AppKey" value="${#Project#AppKey}" xmlns="http://eviware.com/soapui/config"/></con:setting>
        </con:settings>
        <con:request/>
        <con:originalUri>http://stg1.mesos.rccl.com/booking-stg1/v4/booking/rest/v3/retrieveTerminalId</con:originalUri>
        <con:assertion type="JsonPath Match" id="07bc5ac4-1ebd-49c7-b7be-1bbb0df940b1" name="Match content of [status]">
          <con:configuration>
            <path>$['header']['status']</path>
            <content>Success</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="0da2a3de-3fc2-4efc-8e7d-32a5afed9bea" name="Match content of [status]">
          <con:configuration>
            <path>$['header']['status']</path>
            <content>Success</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:parameters>
          <con:entry key="header.language" value="${DataSource#language}"/>
          <con:entry key="header.application" value="${DataSource#application}"/>
          <con:entry key="countryCode" value="${DataSource#countryCode}"/>
          <con:entry key="bookingAccessToken" value="${#TestCase#BookingAccessToken}"/>
          <con:entry key="header.domainId" value="${DataSource#domainId}"/>
          <con:entry key="header.brand" value="${DataSource#brand}"/>
          <con:entry key="bookingId" value="${#TestCase#BookingId}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>header.application</con:entry>
          <con:entry>header.brand</con:entry>
          <con:entry>header.domainId</con:entry>
          <con:entry>header.language</con:entry>
          <con:entry>countryCode</con:entry>
          <con:entry>bookingId</con:entry>
          <con:entry>bookingAccessToken</con:entry>
          <con:entry>agencyId</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="8f3a309f-d6f4-489c-9861-4611d598e9b4">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="07590858-b342-4c54-8198-bedf1bc0ac61">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="40bf441a-bcdb-4db5-b3e7-470754e41840">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6420117f-650f-4baf-92a0-850ffdd2aa49">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="7a10e7fd-d882-4f61-b73b-6f4dcda11154">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="4e89681c-9601-4fb8-a9ef-234c3fd76897">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f8dfa3ed-98ae-4c72-819e-1f129985913f">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="cfd35c17-9793-420e-9f15-61622ba978ea">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="9922ee0f-40db-4a49-9447-17f361e3096c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="adb2fdf9-b64b-4691-95d1-df289b06431d">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="0833c981-c533-4700-abe7-81135fb5a38a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="7f6a785a-2702-40d0-9d34-84682b9da9d3">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="16f53452-9022-476e-9f4b-48f5bffe559a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="b81067df-dd43-4f98-805e-853175fd61e9">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="a75bec4f-654f-4b06-9c6e-7424ad504573">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f3ea9050-4e80-4d71-bbed-e23be33c100c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1328077e-edb5-4f23-99ac-ba2884c570c2">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="9395442b-b075-4c90-9dc7-175d79a7b708">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1a635486-274f-4491-b2dd-13fea67b7bdc">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="3c6154ae-6919-4433-b530-0006545db4d2">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="25855cac-8c80-49bd-93ff-6e22fcdde5d9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="f6d9482e-3953-4c54-a617-6a743f6ca440">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="0f63911f-118f-4814-9ee0-13a012cbd1ba">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="78366991-1005-4019-b46c-c36122958cb5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6fff4ff9-f0d4-4d0d-89e1-a5f205ec4546">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="d9c61de5-a3a7-4183-8bd0-92bf86872f5a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1b22dd5c-2e3d-4a03-a9b6-6798d35431d3">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6f3087d8-30e1-40b5-a7a0-c78078035746">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="05d1995b-507d-4e9b-a0ae-b4b3914430c6">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="c664df8a-1bc9-4fd0-b9df-f335d0d1d097">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="24ea1433-4f38-4a03-8999-7144deaddd02">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6f2a94fc-5033-4808-852b-651458fa5742">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f01e9d57-ab54-41f0-9a8a-043e0b93b4f5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="755bdcf9-70a8-4132-844d-e5cd8d24e80c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="47074864-6f72-4d97-bae4-21c8ed49aa75">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="b90fdab2-9475-4f32-8f02-297fa386bc5c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="30e190d4-5cca-4b41-a9d3-1723c6ff34d4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="361d8992-6d1c-42db-abc6-a3db88088a91">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="4ffc1287-e3e9-4aba-aa44-a81cbddd261a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="CancelBooking" id="aa64d7f7-75b2-4828-85f2-f6ae94562767" disabled="true">
    <con:settings/>
    <con:config service="Booking" resourcePath="/cancelBooking" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:restRequest name="CancelBooking" id="af517f6a-a79e-4f96-b16c-dfed6e236744" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="AppKey" value="${#Project#AppKey}" xmlns="http://eviware.com/soapui/config"/></con:setting>
        </con:settings>
        <con:endpoint>${#Global#Booking_REST_Endpoint}</con:endpoint>
        <con:request>{
   "header":{
      "application":"${DataSource#Orchestration_application}",
      "brand":"${DataSource#Orchestration_brand}",
      "domainId":"${DataSource#Orchestration_domainId}",
      "language":"${DataSource#language}"
   },
   "countryCode":"${DataSource#Orchestration_countryCode}",
    "bookingId":"${#TestCase#BookingId}",
    "bookingAccessToken":"${#TestCase#BookingAccessToken}",
    "lockBooking":"${DataSource#Orchestration_lockBooking}"
}</con:request>
        <con:originalUri>http://eslbservicestst01.rccl.com/esl/booking/rest/v3/cancelBooking</con:originalUri>
        <con:assertion type="Simple Contains" id="c04c42a6-81ae-4b6a-9e1a-545b9666d74a" name="Contains">
          <con:configuration>
            <token>Success</token>
            <ignoreCase>false</ignoreCase>
            <useRegEx>false</useRegEx>
          </con:configuration>
        </con:assertion>
        <con:assertion type="JsonPath Match" id="d7a6be81-6333-4077-8e69-b0b24b7df9b1" name="Match content of [status]">
          <con:configuration>
            <path>$['header']['status']</path>
            <content>Success</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:parameters/>
        <con:environmentSpec>
          <con:entry environmentId="7d1e8c91-121f-4b55-96d1-8ca75c1cd945">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="aefc0c06-2768-4736-a8d8-fcad7da98c16">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="706edc95-d046-4617-ae79-da8bc2c4ae4b">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="8f3a309f-d6f4-489c-9861-4611d598e9b4">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="07590858-b342-4c54-8198-bedf1bc0ac61">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="40bf441a-bcdb-4db5-b3e7-470754e41840">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6420117f-650f-4baf-92a0-850ffdd2aa49">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="7a10e7fd-d882-4f61-b73b-6f4dcda11154">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="4e89681c-9601-4fb8-a9ef-234c3fd76897">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f8dfa3ed-98ae-4c72-819e-1f129985913f">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="cfd35c17-9793-420e-9f15-61622ba978ea">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="9922ee0f-40db-4a49-9447-17f361e3096c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="adb2fdf9-b64b-4691-95d1-df289b06431d">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="0833c981-c533-4700-abe7-81135fb5a38a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="7f6a785a-2702-40d0-9d34-84682b9da9d3">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="16f53452-9022-476e-9f4b-48f5bffe559a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="b81067df-dd43-4f98-805e-853175fd61e9">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="a75bec4f-654f-4b06-9c6e-7424ad504573">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f3ea9050-4e80-4d71-bbed-e23be33c100c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1328077e-edb5-4f23-99ac-ba2884c570c2">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="9395442b-b075-4c90-9dc7-175d79a7b708">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1a635486-274f-4491-b2dd-13fea67b7bdc">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="3c6154ae-6919-4433-b530-0006545db4d2">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="25855cac-8c80-49bd-93ff-6e22fcdde5d9">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="f6d9482e-3953-4c54-a617-6a743f6ca440">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="0f63911f-118f-4814-9ee0-13a012cbd1ba">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="78366991-1005-4019-b46c-c36122958cb5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6fff4ff9-f0d4-4d0d-89e1-a5f205ec4546">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="d9c61de5-a3a7-4183-8bd0-92bf86872f5a">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="1b22dd5c-2e3d-4a03-a9b6-6798d35431d3">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6f3087d8-30e1-40b5-a7a0-c78078035746">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="05d1995b-507d-4e9b-a0ae-b4b3914430c6">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="c664df8a-1bc9-4fd0-b9df-f335d0d1d097">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="24ea1433-4f38-4a03-8999-7144deaddd02">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="6f2a94fc-5033-4808-852b-651458fa5742">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="f01e9d57-ab54-41f0-9a8a-043e0b93b4f5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="755bdcf9-70a8-4132-844d-e5cd8d24e80c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="47074864-6f72-4d97-bae4-21c8ed49aa75">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="b90fdab2-9475-4f32-8f02-297fa386bc5c">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="30e190d4-5cca-4b41-a9d3-1723c6ff34d4">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="361d8992-6d1c-42db-abc6-a3db88088a91">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="4ffc1287-e3e9-4aba-aa44-a81cbddd261a">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="datasourceloop" name="DataSource Loop" id="fc1a62db-c836-4680-81ed-dd81030a6389">
    <con:settings/>
    <con:config>
      <dataSourceStep>DataSource</dataSourceStep>
      <targetStep>CruiseSearch</targetStep>
      <discardResults>true</discardResults>
    </con:config>
  </con:testStep>
  <con:properties>
    <con:property>
      <con:name>PackageCode</con:name>
      <con:value>IC7IP090</con:value>
    </con:property>
    <con:property>
      <con:name>ShipCode</con:name>
      <con:value>IC</con:value>
    </con:property>
    <con:property>
      <con:name>SailDate</con:name>
      <con:value>2023-05-25</con:value>
    </con:property>
    <con:property>
      <con:name>FareCode</con:name>
      <con:value>I1786808</con:value>
    </con:property>
    <con:property>
      <con:name>CategoryCode</con:name>
      <con:value>R2</con:value>
    </con:property>
    <con:property>
      <con:name>CabinNumber</con:name>
      <con:value>3404</con:value>
    </con:property>
    <con:property>
      <con:name>AccessToken</con:name>
      <con:value>361a3754-ee56-460c-8ed6-3b151a1814fc</con:value>
    </con:property>
    <con:property>
      <con:name>BookingId</con:name>
      <con:value>1384374</con:value>
    </con:property>
    <con:property>
      <con:name>BookingAccessToken</con:name>
      <con:value>cf656798-d7f4-4a0d-b835-6e21dc9a8d63</con:value>
    </con:property>
  </con:properties>
  <con:reportParameters/>
  <con:breakPoints>
    <con:testStepId>c040fd14-6a54-4fe7-8fad-2c90dd59cb20</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>dc8a0299-7840-4ff9-a92f-81724073b3db</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>ce28e601-a8e2-4ceb-979d-83361cab1329</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:environmentSpec>
    <con:entry environmentId="25855cac-8c80-49bd-93ff-6e22fcdde5d9">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
  </con:environmentSpec>
</con:testCase>